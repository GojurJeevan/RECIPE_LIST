var should = require('should');
var utils = require('../../lib/utils');

describe('utils', function () {
  
  it('querystring', function (done) {
    var q = utils.querystring({ 
      filter: 'seller_id=770469435 AND category_level=2 AND category_level1=30 AND category_level2=50000436',
      sort: '-reserve_price',
      page: 1,
      page_size: 5 
    });
    q.should.eql('filter=seller_id%3D770469435+AND+category_level%3D2+AND+category_level1%3D30+AND+category_level2%3D50000436&sort=-reserve_price&page=1&page_size=5');
    done();
  });

  it('querystring 2', function (done) {
    var q = utils.querystring({
      q: '女装',
      facet: 'facet_key:seller_id,facet_fun:count()'
    });
    q.should.eql('q=%E5%A5%B3%E8%A3%85&facet=facet_key%3Aseller_id%2Cfacet_fun%3Acount%28%29');
    done();
  });

});